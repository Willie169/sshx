(function(e){function t(t){for(var o,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0e2a":function(e,t,n){"use strict";n("c34d")},2225:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e._m(0),e.connect?n("guac-client",{attrs:{query:e.query,"force-http":e.forceHttp}}):n("div",{attrs:{id:"app"}},[n("h1",[e._v("Vue Guacamole client example")]),n("p",[e._v("Enter connection information to connect")]),n("div",{staticClass:"field"},[n("label",{attrs:{for:"scheme"}},[e._v("Scheme/Protocol")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.scheme,expression:"scheme"}],attrs:{type:"text",id:"scheme"},domProps:{value:e.scheme},on:{input:function(t){t.target.composing||(e.scheme=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{attrs:{for:"hostname"}},[e._v("Hostname or IP Address")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.hostname,expression:"hostname"}],attrs:{type:"text",id:"hostname"},domProps:{value:e.hostname},on:{input:function(t){t.target.composing||(e.hostname=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{attrs:{for:"port"}},[e._v("Port (if not default)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.port,expression:"port"}],attrs:{type:"text",id:"port"},domProps:{value:e.port},on:{input:function(t){t.target.composing||(e.port=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{attrs:{for:"user"}},[e._v("User name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user,expression:"user"}],attrs:{type:"text",id:"user"},domProps:{value:e.user},on:{input:function(t){t.target.composing||(e.user=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{attrs:{for:"pass"}},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{type:"password",id:"pass"},domProps:{value:e.pass},on:{input:function(t){t.target.composing||(e.pass=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{attrs:{for:"ignorecert"}},[e._v("Ignore Certificate")]),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.ignoreCert,expression:"ignoreCert"}],attrs:{type:"checkbox",id:"ignorecert"},domProps:{checked:Array.isArray(e.ignoreCert)?e._i(e.ignoreCert,null)>-1:e.ignoreCert},on:{change:function(t){var n=e.ignoreCert,o=t.target,r=!!o.checked;if(Array.isArray(n)){var a=null,i=e._i(n,a);o.checked?i<0&&(e.ignoreCert=n.concat([a])):i>-1&&(e.ignoreCert=n.slice(0,i).concat(n.slice(i+1)))}else e.ignoreCert=r}}})])]),n("div",{staticClass:"field"},[n("label",{attrs:{for:"nla"}},[e._v("Security")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.security,expression:"security"}],attrs:{type:"text",id:"nla",placeholder:"type nla here for Network Level Authentication"},domProps:{value:e.security},on:{input:function(t){t.target.composing||(e.security=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",[e._v("Query string")]),n("span",{staticClass:"pl-1"},[e._v(e._s(e.scrubbedQuery))])]),n("div",{staticClass:"field"},[n("label",{attrs:{for:"forcehttp"}},[e._v("Force HTTP Tunnel")]),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.forceHttp,expression:"forceHttp"}],attrs:{type:"checkbox",id:"forcehttp"},domProps:{checked:Array.isArray(e.forceHttp)?e._i(e.forceHttp,null)>-1:e.forceHttp},on:{change:function(t){var n=e.forceHttp,o=t.target,r=!!o.checked;if(Array.isArray(n)){var a=null,i=e._i(n,a);o.checked?i<0&&(e.forceHttp=n.concat([a])):i>-1&&(e.forceHttp=n.slice(0,i).concat(n.slice(i+1)))}else e.forceHttp=r}}})])]),n("div",{staticClass:"center"},[n("button",{staticClass:"connect",on:{click:function(t){return e.doConnect()}}},[e._v("Connect")])])])],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticStyle:{position:"fixed"},attrs:{href:"https://github.com/wwt/guac-vue"}},[n("img",{staticClass:"attachment-full size-full",attrs:{width:"149",height:"149",src:"https://github.blog/wp-content/uploads/2008/12/forkme_left_red_aa0000.png?resize=149%2C149",alt:"Fork me on GitHub","data-recalc-dims":"1"}})])}],i=n("3835"),s=(n("4fad"),n("99af"),n("a15b"),n("5319"),n("ac1f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"viewport",staticClass:"viewport"},[n("modal",{ref:"modal",on:{reconnect:function(t){return e.connect(e.query)}}}),n("div",{ref:"display",staticClass:"display",attrs:{tabindex:"0"}})],1)}),c=[],u=n("b85c"),l=n("a9c6"),d=n.n(l),p=function(e){var t=this;this.touchMouseThreshold=3,this.scrollThreshold=53,this.PIXELS_PER_LINE=18,this.PIXELS_PER_PAGE=16*this.PIXELS_PER_LINE,this.currentState=new d.a.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null,this.onmouseout=null;var n=0,o=0;function r(e){e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function a(){n=t.touchMouseThreshold}function i(e){var n=e.deltaY||-e.wheelDeltaY||-e.wheelDelta;if(n?1===e.deltaMode?n=e.deltaY*t.PIXELS_PER_LINE:2===e.deltaMode&&(n=e.deltaY*t.PIXELS_PER_PAGE):n=e.detail*t.PIXELS_PER_LINE,o+=n,o<=-t.scrollThreshold){do{t.onmousedown&&(t.currentState.up=!0,t.onmousedown(t.currentState)),t.onmouseup&&(t.currentState.up=!1,t.onmouseup(t.currentState)),o+=t.scrollThreshold}while(o<=-t.scrollThreshold);o=0}if(o>=t.scrollThreshold){do{t.onmousedown&&(t.currentState.down=!0,t.onmousedown(t.currentState)),t.onmouseup&&(t.currentState.down=!1,t.onmouseup(t.currentState)),o-=t.scrollThreshold}while(o>=t.scrollThreshold);o=0}r(e)}e.addEventListener("contextmenu",(function(e){r(e)}),!1),e.addEventListener("mousemove",(function(o){n?n--:(t.currentState.fromClientPosition(e,o.clientX,o.clientY),t.onmousemove&&t.onmousemove(t.currentState))}),!1),e.addEventListener("mousedown",(function(e){if(r(e),!n){switch(e.button){case 0:t.currentState.left=!0;break;case 1:t.currentState.middle=!0;break;case 2:t.currentState.right=!0;break}t.onmousedown&&t.onmousedown(t.currentState)}}),!1),e.addEventListener("mouseup",(function(e){if(r(e),!n){switch(e.button){case 0:t.currentState.left=!1;break;case 1:t.currentState.middle=!1;break;case 2:t.currentState.right=!1;break}t.onmouseup&&t.onmouseup(t.currentState)}}),!1),e.addEventListener("mouseout",(function(n){n||(n=window.event);var o=n.relatedTarget||n.toElement;while(o){if(o===e)return;o=o.parentNode}r(n),(t.currentState.left||t.currentState.middle||t.currentState.right)&&(t.currentState.left=!1,t.currentState.middle=!1,t.currentState.right=!1,t.onmouseup&&t.onmouseup(t.currentState)),t.onmouseout&&t.onmouseout()}),!1),e.addEventListener("selectstart",(function(e){r(e)}),!1),e.addEventListener("touchmove",a,!1),e.addEventListener("touchstart",a,!1),e.addEventListener("touchend",a,!1),e.addEventListener("DOMMouseScroll",i,!1),e.addEventListener("mousewheel",i,!1),e.addEventListener("wheel",i,!1);var s=function(){var e=document.createElement("div");if(!("cursor"in e.style))return!1;try{e.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch(t){return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(e.style.cursor||"")}();this.setCursor=function(t,n,o){if(s){var r=t.toDataURL("image/png");return e.style.cursor="url("+r+") "+n+" "+o+", auto",!0}return!1}};p.State=d.a.Mouse.State,p.Touchpad=d.a.Mouse.Touchpad,p.Touchscreen=d.a.Mouse.Touchscreen;var h={mouse:p},f={IDLE:"IDLE",CONNECTING:"CONNECTING",WAITING:"WAITING",CONNECTED:"CONNECTED",DISCONNECTED:"DISCONNECTED",CLIENT_ERROR:"CLIENT_ERROR",TUNNEL_ERROR:"TUNNEL_ERROR"},m=n("1da1"),v=(n("96cf"),{install:function(e){v.getLocalClipboard().then((function(e){return v.cache=e})),window.addEventListener("load",v.update(e),!0),window.addEventListener("copy",v.update(e)),window.addEventListener("cut",v.update(e)),window.addEventListener("focus",(function(t){t.target===window&&v.update(e)()}),!0)},update:function(e){return function(){v.getLocalClipboard().then((function(t){v.cache=t,v.setRemoteClipboard(e)}))}},setRemoteClipboard:function(e){if(v.cache){var t,n=e.createClipboardStream(v.cache.type);"string"===typeof v.cache.data?(t=new d.a.StringWriter(n),t.sendText(v.cache.data),t.sendEnd()):(t=new d.a.BlobWriter(n),t.oncomplete=function(){t.sendEnd()},t.sendBlob(v.cache.data))}}});v.getLocalClipboard=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!navigator.clipboard||!navigator.clipboard.readText){e.next=5;break}return e.next=3,navigator.clipboard.readText();case 3:return t=e.sent,e.abrupt("return",{type:"text/plain",data:t});case 5:case"end":return e.stop()}}),e)}))),v.setLocalClipboard=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!navigator.clipboard||!navigator.clipboard.writeText){e.next=4;break}if("text/plain"!==t.type){e.next=4;break}return e.next=4,navigator.clipboard.writeText(t.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v.onClipboard=function(e,t){var n;if(/^text\//.exec(t)){n=new d.a.StringReader(e);var o="";n.ontext=function(e){o+=e},n.onend=function(){v.setLocalClipboard({type:t,data:o})}}else n=new d.a.BlobReader(e,t),n.onend=function(){v.setLocalClipboard({type:t,data:n.getBlob()})}};var g=v,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.status?n("div",{staticClass:"modal"},[n("h2",[e._v(e._s(e.title[e.status]))]),n("p",[e._v(e._s(e.message?e.message:e.text[e.status]))]),e.canReconnect?n("span",{staticClass:"rct",on:{click:function(t){return e.$emit("reconnect")}}},[e._v(" Reconnect ")]):e._e()]):e._e()},b=[],w=(n("caad"),{data:function(){return{status:null,message:"",title:{CONNECTING:"Connecting",DISCONNECTED:"Disconnected",UNSTABLE:"Unstable",WAITING:"Waiting",CLIENT_ERROR:"Client Error"},text:{CONNECTING:"Connecting to Guacamole...",DISCONNECTED:"You have been disconnected.",UNSTABLE:"The network connection to the Guacamole server appears unstable.",WAITING:"Connected to Guacamole. Waiting for response..."}}},computed:{canReconnect:function(){return["DISCONNECTED","CLIENT_ERROR"].includes(this.status)}},methods:{show:function(e,t){e===f.CONNECTED?this.status=null:this.status=e,this.message=t}}}),E=w,C=(n("0e2a"),n("2877")),S=Object(C["a"])(E,y,b,!1,null,"38efd338",null),N=S.exports;d.a.Mouse=h.mouse;var T="ws://".concat(location.host,"/websocket-tunnel"),_="http://".concat(location.host,"/tunnel"),A={components:{Modal:N},props:{query:{type:String,required:!0},forceHttp:{type:Boolean,required:!1,default:!1}},data:function(){return{connected:!1,display:null,currentAdjustedHeight:null,client:null,keyboard:null,mouse:null,lastEvent:null,connectionState:f.IDLE,errorMessage:"",arguments:{}}},watch:{connectionState:function(e){this.$refs.modal.show(e,this.errorMessage)}},methods:{send:function(e){if(this.client){var t,n=Object(u["a"])(e.data);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.client.sendKeyEvent(1,o.charCodeAt(0))}}catch(r){n.e(r)}finally{n.f()}}},copy:function(e){this.client&&(g.cache={type:"text/plain",data:e.data},g.setRemoteClipboard(this.client))},handleMouseState:function(e){var t=Object.assign({},e,{x:e.x/this.display.getScale(),y:e.y/this.display.getScale()});this.client.sendMouseState(t)},resize:function(){var e=this,t=this.$refs.viewport;if(t&&t.offsetWidth){var n=window.devicePixelRatio||1,o=t.clientWidth*n,r=t.clientHeight*n;this.display.getWidth()===o&&this.display.getHeight()===r||this.client.sendSize(o,r),setTimeout((function(){var n=Math.min(t.clientWidth/Math.max(e.display.getWidth(),1),t.clientHeight/Math.max(e.display.getHeight(),1));e.display.scale(n)}),100)}},connect:function(e){var t,n=this;t=window.WebSocket&&!this.forceHttp?new d.a.WebSocketTunnel(T):new d.a.HTTPTunnel(_,!0),this.client&&(this.display.scale(0),this.uninstallKeyboard()),this.client=new d.a.Client(t),g.install(this.client),t.onerror=function(e){console.error("Tunnel failed ".concat(JSON.stringify(e))),n.connectionState=f.TUNNEL_ERROR},t.onstatechange=function(e){switch(e){case d.a.Tunnel.State.CONNECTING:n.connectionState=f.CONNECTING;break;case d.a.Tunnel.State.OPEN:n.connectionState=f.CONNECTED;break;case d.a.Tunnel.State.UNSTABLE:break;case d.a.Tunnel.State.CLOSED:n.connectionState=f.DISCONNECTED;break}},this.client.onstatechange=function(e){switch(e){case 0:n.connectionState=f.IDLE;break;case 1:break;case 2:n.connectionState=f.WAITING;break;case 3:n.connectionState=f.CONNECTED,window.addEventListener("resize",n.resize),n.$refs.viewport.addEventListener("mouseenter",n.resize),g.setRemoteClipboard(n.client);case 4:case 5:break}},this.client.onerror=function(e){n.client.disconnect(),console.error("Client error ".concat(JSON.stringify(e))),n.errorMessage=e.message,n.connectionState=f.CLIENT_ERROR},this.client.onsync=function(){},this.client.onargv=function(e,t,o){if("text/plain"===t){var r=new d.a.StringReader(e),a="";r.ontext=function(e){a+=e},r.onend=function(){var e=n.client.createArgumentValueStream("text/plain",o);e.onack=function(e){e.isError()||(n.arguments[o]=a)}}}},this.client.onclipboard=g.onClipboard,this.display=this.client.getDisplay();var o=this.$refs.display;o.appendChild(this.display.getElement()),o.addEventListener("contextmenu",(function(e){e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1})),this.client.connect(e),window.onunload=function(){return n.client.disconnect()},this.mouse=new d.a.Mouse(o),this.mouse.onmouseout=function(){n.display&&n.display.showCursor(!1)},o.onclick=function(){o.focus()},o.onfocus=function(){o.className="focus"},o.onblur=function(){o.className=""},this.keyboard=new d.a.Keyboard(o),this.installKeyboard(),this.mouse.onmousedown=this.mouse.onmouseup=this.mouse.onmousemove=this.handleMouseState,setTimeout((function(){n.resize(),o.focus()}),1e3)},installKeyboard:function(){var e=this;this.keyboard.onkeydown=function(t){e.client.sendKeyEvent(1,t)},this.keyboard.onkeyup=function(t){e.client.sendKeyEvent(0,t)}},uninstallKeyboard:function(){this.keyboard.onkeydown=this.keyboard.onkeyup=function(){}}},mounted:function(){this.query&&!this.connected&&(this.connected=!0,this.connect(this.query))}},x=A,O=(n("d561"),Object(C["a"])(x,s,c,!1,null,"d56272a2",null)),k=O.exports,L={name:"app",components:{GuacClient:k},data:function(){return{connect:!1,scheme:"telnet",hostname:"towel.blinkenlights.nl",port:"",user:"",pass:"",ignoreCert:!0,security:"",forceHttp:!1}},computed:{queryObj:function(){return{scheme:this.scheme,hostname:this.hostname,port:this.port,"ignore-cert":this.ignoreCert,security:this.security,username:this.user,password:this.pass}},query:function(){for(var e=[],t=0,n=Object.entries(this.queryObj);t<n.length;t++){var o=Object(i["a"])(n[t],2),r=o[0],a=o[1];a&&e.push("".concat(r,"=").concat(encodeURIComponent(a)))}return e.join("&")},scrubbedQuery:function(){return this.query.replace(/password=[^& ]+/,"password=****")}},methods:{doConnect:function(){window.localStorage&&window.localStorage.setItem("query",JSON.stringify(this.queryObj)),this.connect=!0}},mounted:function(){if(window.localStorage&&window.localStorage.getItem("query")){var e;try{e=JSON.parse(window.localStorage.getItem("query"))}catch(t){return void window.localStorage.setItem("query","{}")}this.scheme=e.scheme,this.hostname=e.hostname,this.port=e.port,this.ignoreCert=e["ignore-cert"],this.nla=e.nla,this.user=e.username,this.pass=e.password}}},I=L,R=(n("034f"),Object(C["a"])(I,r,a,!1,null,null,null)),P=R.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(P)}}).$mount("#app")},"85ec":function(e,t,n){},c34d:function(e,t,n){},d561:function(e,t,n){"use strict";n("2225")}});
//# sourceMappingURL=app.c6e4201d.js.map